{
  '$schema': 'http://json-schema.org/draft-07/schema#',
  'title': 'PDoom1 Settings',
  'description': 'Schema for PDoom1 user settings file',
  'type': 'object',
  'properties': {
    'version': {
      'type': 'string',
      'description': 'Settings schema version',
      'pattern': '^\\d+\\.\\d+\\.\\d+$'
    },
    'device_uuid': {
      'type': 'string',
      'description': 'Unique device identifier',
      'format': 'uuid'
    },
    'audio': {
      'type': 'object',
      'description': 'Audio preferences',
      'properties': {
        'master_volume': {
          'type': 'number',
          'minimum': 0.0,
          'maximum': 1.0,
          'description': 'Master volume level (0.0 to 1.0)'
        },
        'sfx_volume': {
          'type': 'number',
          'minimum': 0.0,
          'maximum': 1.0,
          'description': 'Sound effects volume level (0.0 to 1.0)'
        },
        'music_volume': {
          'type': 'number',
          'minimum': 0.0,
          'maximum': 1.0,
          'description': 'Music volume level (0.0 to 1.0)'
        },
        'muted': {
          'type': 'boolean',
          'description': 'Whether audio is muted'
        }
      },
      'required': ['master_volume', 'sfx_volume', 'music_volume', 'muted'],
      'additionalProperties': false
    },
    'telemetry': {
      'type': 'object',
      'description': 'Telemetry and analytics preferences',
      'properties': {
        'enabled': {
          'type': 'boolean',
          'description': 'Whether telemetry collection is enabled'
        },
        'analytics_uuid': {
          'type': ['string', 'null'],
          'description': 'Analytics identifier (separate from device UUID)',
          'format': 'uuid'
        }
      },
      'required': ['enabled'],
      'additionalProperties': false
    },
    'gameplay': {
      'type': 'object',
      'description': 'Gameplay preferences',
      'properties': {
        'difficulty': {
          'type': 'string',
          'enum': ['easy', 'normal', 'hard', 'nightmare'],
          'description': 'Default difficulty level'
        },
        'auto_save': {
          'type': 'boolean',
          'description': 'Whether to automatically save progress'
        }
      },
      'required': ['difficulty', 'auto_save'],
      'additionalProperties': false
    }
  },
  'required': ['version', 'device_uuid', 'audio', 'telemetry', 'gameplay'],
  'additionalProperties': false
}