[gd_scene load_steps=9 format=3 uid="uid://bvqxj8x5p6h8c"]

[ext_resource type="Script" path="res://scripts/game_manager.gd" id="1_main_gm"]
[ext_resource type="Script" path="res://scripts/ui/main_ui.gd" id="2_main_ui"]
[ext_resource type="Texture2D" path="res://assets/images/office_cat.png" id="3_cat_texture"]
[ext_resource type="PackedScene" uid="uid://cw3j8x5p6doom" path="res://scenes/ui/doom_meter.tscn" id="4_doom_meter"]
[ext_resource type="PackedScene" uid="uid://gameover123456" path="res://scenes/ui/game_over_screen.tscn" id="5_gameover"]
[ext_resource type="Script" path="res://scripts/ui/tab_manager.gd" id="6_tab_mgr"]
[ext_resource type="PackedScene" uid="uid://employee_screen123" path="res://scenes/ui/employee_screen.tscn" id="7_employee"]
[ext_resource type="PackedScene" uid="uid://bugreport123456" path="res://scenes/ui/bug_report_panel.tscn" id="8_bugreport"]
[ext_resource type="PackedScene" uid="uid://officecat123456" path="res://scenes/ui/office_cat.tscn" id="9_officecat"]
[ext_resource type="PackedScene" uid="uid://cnj8yk4x5oopm" path="res://scenes/pause_menu.tscn" id="10_pausemenu"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_TurnCounter"]
bg_color = Color(0.15, 0.15, 0.2, 0.8)
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color(0.9, 0.9, 0.3, 0.5)
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4

[node name="Main" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="GameManager" type="Node" parent="."]
script = ExtResource("1_main_gm")

[node name="TabManager" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("6_tab_mgr")

[node name="MainUI" type="VBoxContainer" parent="TabManager"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("2_main_ui")

[node name="TopBar" type="HBoxContainer" parent="TabManager/MainUI"]
layout_mode = 2
size_flags_vertical = 0
theme_override_constants/separation = 10

[node name="TitleLabel" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "P(Doom)"
theme_override_font_sizes/font_size = 18

[node name="Sep1" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "|"
modulate = Color(0.4, 0.4, 0.5, 1)

[node name="TurnLabel" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "Week 1 | Mon Jul 3, 2017 | Day 1/5"
theme_override_font_sizes/font_size = 18
theme_override_colors/font_color = Color(0.9, 0.9, 0.3, 1)
theme_override_styles/normal = SubResource("StyleBoxFlat_TurnCounter")

[node name="Sep2" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "|"
modulate = Color(0.4, 0.4, 0.5, 1)

[node name="MoneyLabel" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "Money: $0"
theme_override_font_sizes/font_size = 14

[node name="Sep3" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "|"
modulate = Color(0.4, 0.4, 0.5, 1)

[node name="ComputeLabel" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "Compute: 0"
theme_override_font_sizes/font_size = 14

[node name="Sep4" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "|"
modulate = Color(0.4, 0.4, 0.5, 1)

[node name="ResearchLabel" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "Research: 0"
theme_override_font_sizes/font_size = 14

[node name="Sep5" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "|"
modulate = Color(0.4, 0.4, 0.5, 1)

[node name="PapersLabel" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "Papers: 0"
theme_override_font_sizes/font_size = 14

[node name="Sep6" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "|"
modulate = Color(0.4, 0.4, 0.5, 1)

[node name="ReputationLabel" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "Rep: 0"
theme_override_font_sizes/font_size = 14

[node name="Sep7" type="Label" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
text = "|"
modulate = Color(0.4, 0.4, 0.5, 1)

[node name="APLabel" type="RichTextLabel" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
bbcode_enabled = true
text = "AP: 0"
fit_content = false
custom_minimum_size = Vector2(300, 0)
scroll_active = false
theme_override_font_sizes/normal_font_size = 14

[node name="Spacer" type="Control" parent="TabManager/MainUI/TopBar"]
layout_mode = 2
size_flags_horizontal = 3

[node name="HSeparator1" type="HSeparator" parent="TabManager/MainUI"]
layout_mode = 2

[node name="ContentArea" type="HBoxContainer" parent="TabManager/MainUI"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 5

[node name="LeftPanel" type="VBoxContainer" parent="TabManager/MainUI/ContentArea"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.3

[node name="ActionsScroll" type="ScrollContainer" parent="TabManager/MainUI/ContentArea/LeftPanel"]
layout_mode = 2
size_flags_vertical = 3

[node name="ActionsList" type="VBoxContainer" parent="TabManager/MainUI/ContentArea/LeftPanel/ActionsScroll"]
layout_mode = 2
size_flags_horizontal = 3

[node name="MiddlePanel" type="VBoxContainer" parent="TabManager/MainUI/ContentArea"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.3
alignment = 2

[node name="TitleZone" type="CenterContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel"]
layout_mode = 2

[node name="TitleLabel" type="Label" parent="TabManager/MainUI/ContentArea/MiddlePanel/TitleZone"]
layout_mode = 2
text = "P(DOOM)"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 24
theme_override_colors/font_color = Color(1.0, 0.6, 0.0, 1)

[node name="CoreZone" type="HBoxContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel"]
layout_mode = 2
theme_override_constants/separation = 0

[node name="CatZone" type="CenterContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone"]
layout_mode = 2
size_flags_horizontal = 3

[node name="OfficeCat" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone/CatZone" instance=ExtResource("9_officecat")]
layout_mode = 2
visible = false

[node name="RightZones" type="VBoxContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 0

[node name="NumericDoomZone" type="CenterContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone/RightZones"]
layout_mode = 2

[node name="NumericDoomLabel" type="Label" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone/RightZones/NumericDoomZone"]
layout_mode = 2
text = "58.5%"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 18
theme_override_colors/font_color = Color(1.0, 0.3, 0.3, 1)

[node name="DoomMeterZone" type="CenterContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone/RightZones"]
layout_mode = 2
size_flags_vertical = 3

[node name="DoomMeterPanel" type="PanelContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone/RightZones/DoomMeterZone"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="MarginContainer" type="MarginContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone/RightZones/DoomMeterZone/DoomMeterPanel"]
layout_mode = 2
theme_override_constants/margin_left = 2
theme_override_constants/margin_top = 2
theme_override_constants/margin_right = 2
theme_override_constants/margin_bottom = 2

[node name="DoomMeter" parent="TabManager/MainUI/ContentArea/MiddlePanel/CoreZone/RightZones/DoomMeterZone/DoomMeterPanel/MarginContainer" instance=ExtResource("4_doom_meter")]
layout_mode = 2

[node name="EmployeeRosterZone" type="VBoxContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 4

[node name="RosterLabel" type="Label" parent="TabManager/MainUI/ContentArea/MiddlePanel/EmployeeRosterZone"]
layout_mode = 2
text = "Staff Roster"
horizontal_alignment = 1
theme_override_font_sizes/font_size = 12
theme_override_colors/font_color = Color(0.7, 0.8, 0.9, 1)

[node name="RosterScroll" type="ScrollContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/EmployeeRosterZone"]
layout_mode = 2
size_flags_vertical = 3
horizontal_scroll_mode = 0

[node name="RosterContainer" type="VBoxContainer" parent="TabManager/MainUI/ContentArea/MiddlePanel/EmployeeRosterZone/RosterScroll"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 2

[node name="RightPanel" type="VBoxContainer" parent="TabManager/MainUI/ContentArea"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.4

[node name="UpgradesLabel" type="Label" parent="TabManager/MainUI/ContentArea/RightPanel"]
layout_mode = 2
text = "Upgrades:"
theme_override_font_sizes/font_size = 16
theme_override_colors/font_color = Color(0.8, 0.9, 1.0, 1)

[node name="UpgradesScroll" type="ScrollContainer" parent="TabManager/MainUI/ContentArea/RightPanel"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.45

[node name="UpgradesList" type="VBoxContainer" parent="TabManager/MainUI/ContentArea/RightPanel/UpgradesScroll"]
layout_mode = 2
size_flags_horizontal = 3

[node name="QueueLabel" type="Label" parent="TabManager/MainUI/ContentArea/RightPanel"]
layout_mode = 2
text = "Action Queue:"

[node name="QueuePanel" type="PanelContainer" parent="TabManager/MainUI/ContentArea/RightPanel"]
layout_mode = 2
size_flags_vertical = 0

[node name="QueueContainer" type="HBoxContainer" parent="TabManager/MainUI/ContentArea/RightPanel/QueuePanel"]
layout_mode = 2
theme_override_constants/separation = 8

[node name="QueueHint" type="Label" parent="TabManager/MainUI/ContentArea/RightPanel/QueuePanel/QueueContainer"]
layout_mode = 2
text = "No actions queued..."
modulate = Color(0.5, 0.5, 0.5, 1)

[node name="HSeparator" type="HSeparator" parent="TabManager/MainUI/ContentArea/RightPanel"]
layout_mode = 2

[node name="MessageLogLabel" type="Label" parent="TabManager/MainUI/ContentArea/RightPanel"]
layout_mode = 2
text = "Message Log:"

[node name="MessageScroll" type="ScrollContainer" parent="TabManager/MainUI/ContentArea/RightPanel"]
layout_mode = 2
size_flags_vertical = 3
size_flags_stretch_ratio = 0.35

[node name="MessageLog" type="RichTextLabel" parent="TabManager/MainUI/ContentArea/RightPanel/MessageScroll"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
bbcode_enabled = true
text = "[color=gray]Game not started...[/color]"
fit_content = true
scroll_following = true

[node name="HSeparator2" type="HSeparator" parent="TabManager/MainUI"]
layout_mode = 2

[node name="InfoBar" type="PanelContainer" parent="TabManager/MainUI"]
layout_mode = 2
size_flags_vertical = 0

[node name="MarginContainer" type="MarginContainer" parent="TabManager/MainUI/InfoBar"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 5
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 5

[node name="InfoLabel" type="RichTextLabel" parent="TabManager/MainUI/InfoBar/MarginContainer"]
layout_mode = 2
bbcode_enabled = true
text = "[color=gray]Hover over actions to see details...
 [/color]"
fit_content = true
scroll_active = false

[node name="BottomBar" type="HBoxContainer" parent="TabManager/MainUI"]
layout_mode = 2
size_flags_vertical = 0
theme_override_constants/separation = 8

[node name="ControlButtons" type="HBoxContainer" parent="TabManager/MainUI/BottomBar"]
layout_mode = 2
theme_override_constants/separation = 3

[node name="InitButton" type="Button" parent="TabManager/MainUI/BottomBar/ControlButtons"]
layout_mode = 2
text = "Init"
theme_override_font_sizes/font_size = 12

[node name="TestActionButton" type="Button" parent="TabManager/MainUI/BottomBar/ControlButtons"]
layout_mode = 2
text = "Hire SR"
disabled = true
theme_override_font_sizes/font_size = 12

[node name="ReserveAPButton" type="Button" parent="TabManager/MainUI/BottomBar/ControlButtons"]
layout_mode = 2
text = "Reserve AP"
disabled = true
theme_override_font_sizes/font_size = 12

[node name="ClearQueueButton" type="Button" parent="TabManager/MainUI/BottomBar/ControlButtons"]
layout_mode = 2
text = "Clear (C)"
disabled = true
theme_override_font_sizes/font_size = 12

[node name="EndTurnButton" type="Button" parent="TabManager/MainUI/BottomBar/ControlButtons"]
layout_mode = 2
size_flags_horizontal = 3
text = "‚èé END TURN (Space)"
disabled = true
theme_override_font_sizes/font_size = 16
theme_override_colors/font_color = Color(0.2, 0.9, 0.9, 1)
theme_override_colors/font_disabled_color = Color(0.4, 0.4, 0.4, 1)
[node name="CommitPlanButton" type="Button" parent="TabManager/MainUI/BottomBar/ControlButtons"]
layout_mode = 2
text = "Plan (Enter)"
disabled = true
theme_override_font_sizes/font_size = 12

[node name="PhaseLabel" type="RichTextLabel" parent="TabManager/MainUI/BottomBar"]
layout_mode = 2
size_flags_horizontal = 3
bbcode_enabled = true
text = "[color=white]Phase: Not Started[/color]"
fit_content = true
scroll_active = false

[node name="BugReportButton" type="Button" parent="TabManager/MainUI/BottomBar"]
layout_mode = 2
custom_minimum_size = Vector2(110, 0)
text = "Bug Report (N)"
theme_override_font_sizes/font_size = 12

[node name="EmployeeScreen" parent="TabManager" instance=ExtResource("7_employee")]
visible = false
layout_mode = 1

[node name="GameOverScreen" parent="TabManager" instance=ExtResource("5_gameover")]
layout_mode = 1

[node name="BugReportPanel" parent="TabManager" instance=ExtResource("8_bugreport")]
layout_mode = 1

[node name="PauseMenu" parent="." instance=ExtResource("10_pausemenu")]
layout_mode = 1

[connection signal="pressed" from="TabManager/MainUI/BottomBar/ControlButtons/InitButton" to="TabManager/MainUI" method="_on_init_button_pressed"]
[connection signal="pressed" from="TabManager/MainUI/BottomBar/ControlButtons/TestActionButton" to="TabManager/MainUI" method="_on_test_action_button_pressed"]
[connection signal="pressed" from="TabManager/MainUI/BottomBar/ControlButtons/ReserveAPButton" to="TabManager/MainUI" method="_on_reserve_ap_button_pressed"]
[connection signal="pressed" from="TabManager/MainUI/BottomBar/ControlButtons/ClearQueueButton" to="TabManager/MainUI" method="_on_clear_queue_button_pressed"]
[connection signal="pressed" from="TabManager/MainUI/BottomBar/ControlButtons/EndTurnButton" to="TabManager/MainUI" method="_on_end_turn_button_pressed"]
[connection signal="pressed" from="TabManager/MainUI/BottomBar/ControlButtons/CommitPlanButton" to="TabManager/MainUI" method="_on_commit_plan_button_pressed"]
[connection signal="pressed" from="TabManager/MainUI/BottomBar/BugReportButton" to="TabManager/MainUI" method="_on_bug_report_button_pressed"]
